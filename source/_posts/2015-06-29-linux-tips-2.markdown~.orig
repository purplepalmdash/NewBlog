---
layout: post
title: "Linux Tips(2)"
date: 2015-06-29 09:27:17 +0800
comments: true
categories: Linux
---
<<<<<<< HEAD
### 1. XenCenter Installation
Just use your windows's browser point to your XenServer IP Address, Download the XenCenter, and install it.     

Update Some tools on XenServer:    

```
$ vim /etc/yum.repos.d/CentOS-Base.repo
...
enabled=1
...
$ yum install -y lm_sensors
```
After installation of lm_sensors you could see more detailed information on XenServer.     

### 2. Disable Specified Repository
Since citrix have no data in its repository, simply disable it.   

```
$ yum update --disablerepo=citrix
```

### 3. Yum Shell

```
yum shell
remove ffmpeg-libpostproc
remove ffmpeg
install ffmpeg-compat
run
```

### 4. Install lm_sensors In XenServer
The default lm_sensors could not be insalled due to dependency errors, so we download the source code from lm_sensors website and manually build and install it:    

```
$ wget http://dl.lm-sensors.org/lm-sensors/releases/lm_sensors-3.4.0.tar.bz2
$ tar xzvf lm_sensors-3.4.0.tar.bz2
$ cd lm_sensors
$ yum install -y gcc make flex bison 
$ make && make install
$ export PATH=/usr/local/bin:$PATH
$ sensors-detect
$ sensors
```

In 79 machine, sensors won't printout cpu fan, solved by:    

```
$ modprobe it87 force_id=0x8728
```

Or configure the modprobe.d:    

```
[root:/etc/modprobe.d]# cat it87.conf 
options it87 force_id=0x8603

[root:/etc/modprobe.d]# pwd
/etc/modprobe.d
```

### 5. Detect an AMD Chipset
First using `sensors-detect` for detecting the sensors, the result is listed as:    

```
Now follows a summary of the probes I have just done.

Driver `w83627ehf':
  * ISA bus, address 0x290
    Chip `Nuvoton W83677HG-I (NCT5572D/NCT6771F/NCT6772F/NCT6775F) Super IO Sensors' (confidence: 9)

Driver `k10temp' (autoloaded):
  * Chip `AMD Family 12h and 14h thermal sensors' (confidence: 9)
```

Now go to the modules directory for finding out the corresponding driver:    

```
[root@xenserver-WolfHunter 3.10.0+2]# find . | grep -i w83
./kernel/drivers/hwmon/w83795.ko
./kernel/drivers/hwmon/w83627hf.ko
./kernel/drivers/hwmon/w83l786ng.ko
./kernel/drivers/hwmon/w83792d.ko
./kernel/drivers/hwmon/w83l785ts.ko
./kernel/drivers/hwmon/w83791d.ko
./kernel/drivers/hwmon/w83793.ko
./kernel/drivers/hwmon/w83781d.ko
./kernel/drivers/hwmon/w83627ehf.ko
[root@xenserver-WolfHunter 3.10.0+2]# pwd
/lib/modules/3.10.0+2
[root@xenserver-WolfHunter 3.10.0+2]# modprobe w83627ehf.ko
```

Now you could detect more infos, add to automatically:    

```
[root@xenserver-WolfHunter modprobe.d]# cat w83627ehf.conf
#!/bin/sh 
/sbin/insmod /lib/modules/3.10.0+2/kernel/drivers/hwmon/w83627ehf.ko
```

### 6. Headless Ubuntu
Headless Ubuntu, for updating grub.    

```
Add: GRUB_RECORDFAIL_TIMEOUT = 15 in /etc/default/grub, and run "sudo update-grub". You can change the 15 to any arbitrary number of seconds that you like.
```
=======
### Joggler Bootloader Configuration
Notice there are 2 systems available on Joggler.    

```
[dash@/run/media/dash/linux-boot]$ cat grub.cfg
loadfont /unicode.pf2
terminal_output gfxterm
set timeout=5
menuentry "Ubuntu 12.04 LTS (Precise) - 3.2.32joggler1" {
  # text mode
  #linux /vmlinuz-3.2.32joggler1 root=LABEL=linux-root 3 ro text pci=routeirq
  # Graphical mode
  linux /vmlinuz-3.2.32joggler1 root=LABEL=linux-root 3 ro pci=routeirq
  initrd /initrd.img-3.2.32joggler1
}
###############Xubuntu#####################3
#menuentry "XUbuntu 12.04 LTS (Precise) - 3.2.32joggler1" {
#  linux /vmlinuz-3.2.32joggler1 root=LABEL=Xubuntu ro quiet splash 
#  initrd /initrd.img-3.2.32joggler1
}
```

>>>>>>> f5f9abd4fb685ab862008cdd97eb2f69495f4d67
