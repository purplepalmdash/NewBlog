---
layout: post
title: "Working Tips On Mesos/Ansible"
date: 2016-05-09 12:20:34 +0800
comments: true
categories: Virtualization
---
### Package Prepare
We have the default vagrant box generated by bento, listed it via:    

```
âžœ  mesos vagrant box list | grep -i centos | grep -i virtualbox
centos72                                     (virtualbox, 0)
```
Now we want to generate a new box from it, and added our own configuration:    

```
$ vagrant init centos72
$ vagrant up
$ vagrant ssh
```
Edit for keeping the cache:    

```
$ cat /etc/yum.conf  | more
[main]
cachedir=/home/vagrant/rpms/$basearch/$releasever
#keepcache=0
keepcache=1
```
Now poweroff the machine and export it to the new box:    

```
$ vagrant package --output centoslocalrpm.box
$ vagrant box add centoslocalrpm centoslocalrpm.box
```
Using the new box, the rpm packages could be saved into the folder
`/home/vagrant/rpms`.     

### Deploy Using Ansible
Refers to    
[https://open.mesosphere.com/advanced-course/recreating-the-cluster-using-ansible/](https://open.mesosphere.com/advanced-course/recreating-the-cluster-using-ansible/)
